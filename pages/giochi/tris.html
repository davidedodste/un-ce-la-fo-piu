<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Gioco del Tris</title>
<style>
    :root { --size: 110px; --line: 4px; --accent: #333; }
    body   { font-family: system-ui, sans-serif; display: flex; flex-direction: column;
             align-items: center; justify-content: flex-start; gap: 1.2rem; margin-top: 40px; }
    h1     { margin: 0; }
    #board { display: grid; grid-template-columns: repeat(3, var(--size));
             grid-auto-rows: var(--size); gap: 0; position: relative; }
    #board button { font-size: 3rem; font-weight: 600; border: 0; width: 100%; height: 100%;
                    background: none; cursor: pointer; }
    /* griglia “disegnata” con pseudoelementi per linee sottili */
    #board::before, #board::after,
    #board > :nth-child(3n+2)::before,
    #board > :nth-child(-n+3)::after {
        content: ""; position: absolute; background: var(--accent); }
    #board::before { /* linea verticale 1 */  left:  calc(var(--size) - var(--line)/2); top:0;
                     width: var(--line); height: 100%; }
    #board::after  { /* linea verticale 2 */  left:  calc(2*var(--size) - var(--line)/2); top:0;
                     width: var(--line); height: 100%; }
    #board > :nth-child(3n+2)::before { /* orizzontali (una per riga) */
                     top: calc(var(--size) - var(--line)/2); left:0;
                     height: var(--line); width: 100%; }
    #board > :nth-child(-n+3)::after  { /* orizzontale 2 */
                     top: calc(2*var(--size) - var(--line)/2); left:0;
                     height: var(--line); width: 100%; }
    #msg   { font-size: 1.25rem; min-height: 1.5em; }
    #restart { padding: .6rem 1.2rem; font-size: 1rem; border: 1px solid var(--accent);
               background: #f5f5f5; cursor: pointer; border-radius: .4rem; }
    .win { color: #d02; animation: blink .3s step-end infinite alternate; }
    @keyframes blink { to { opacity: .3; } }
</style>
</head>
<body>

<h1>Gioco del Tris</h1>

<div id="board" aria-label="Tavola del tris">
    <!-- 9 celle -->
    <button data-i="0"></button><button data-i="1"></button><button data-i="2"></button>
    <button data-i="3"></button><button data-i="4"></button><button data-i="5"></button>
    <button data-i="6"></button><button data-i="7"></button><button data-i="8"></button>
</div>

<div id="msg">Turno del giocatore X</div>
<button id="restart">Ricomincia</button>

<script>
(() => {
    const boardEl = document.getElementById('board');
    const cells    = [...boardEl.querySelectorAll('button')];
    const msgEl    = document.getElementById('msg');
    const restart  = document.getElementById('restart');

    let board, turn, ended;

    const lines = [
        [0,1,2],[3,4,5],[6,7,8], // righe
        [0,3,6],[1,4,7],[2,5,8], // colonne
        [0,4,8],[2,4,6]          // diagonali
    ];

    function start() {
        board = Array(9).fill('');
        turn  = 'X';
        ended = false;
        cells.forEach(c => { c.textContent = ''; c.classList.remove('win'); c.disabled = false; });
        msgEl.textContent = `Turno del giocatore ${turn}`;
    }

    function checkWinner() {
        for (const l of lines) {
            const [a,b,c] = l;
            if (board[a] && board[a] === board[b] && board[b] === board[c]) {
                l.forEach(i => cells[i].classList.add('win'));
                return board[a];
            }
        }
        return '';
    }

    boardEl.addEventListener('click', e => {
        const btn = e.target.closest('button');
        if (!btn || ended) return;

        const i = +btn.dataset.i;
        if (board[i]) return;          // già occupata

        board[i] = turn;
        btn.textContent = turn;

        const win = checkWinner();
        if (win) {
            msgEl.textContent = `Il giocatore ${win} ha vinto!`;
            ended = true;
        } else if (!board.includes('')) {
            msgEl.textContent = 'Pareggio!';
            ended = true;
        } else {
            turn = turn === 'X' ? 'O' : 'X';
            msgEl.textContent = `Turno del giocatore ${turn}`;
        }
    });

    restart.addEventListener('click', start);
    start();
})();
</script>

</body>
</html>
